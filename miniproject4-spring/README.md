# ğŸ“š Mini Project 04 â€“ Book Generation Service

Spring Boot ê¸°ë°˜ì˜ **ì±…(Book) ìƒì„± ì„œë¹„ìŠ¤**ë¡œ, ì‚¬ìš©ì(User)ê°€ ì±…ì„ ë§Œë“¤ê³  ì´í›„ ìƒì„±ëœ ì´ë¯¸ì§€(GeneratedImage)ë¥¼ ì±…ê³¼ ì—°ê²°í•  ìˆ˜ ìˆëŠ” CRUD REST API í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Spring Boot**
- **Spring Web**
- **Spring Data JPA**
- **H2 Database**
- **Gradle**
- **Lombok**
- **REST API**

---
## ğŸ§± ERD êµ¬ì¡°

### ERD ê°œìš”
- `User (1) â€” (N) Book`
- `Book (1) â€” (1) GeneratedImage`

### ERD ì„¤ëª…

| í…Œì´ë¸” | ì„¤ëª… |
|--------|------|
| **User** | **user_id(PK)**, login_id, password |
| **Book** | **book_id(PK)**, title, description, **user_id(FK)** |
| **GeneratedImage** | **img_id(PK)**, img_url, **book_id(FK)** |

---
## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```src/main/java/com/example/miniproject04
â”‚
â”œâ”€â”€ Entity
â”‚ â”œâ”€â”€ User.java
â”‚ â”œâ”€â”€ Book.java
â”‚ â””â”€â”€ GeneratedImage.java
â”‚
â”œâ”€â”€ Controller
â”‚ â”œâ”€â”€ UserController.java
â”‚ â”œâ”€â”€ BookController.java
â”‚ â””â”€â”€ ImageController.java
â”‚
â”œâ”€â”€ Service
â”‚ â”œâ”€â”€ UserService.java
â”‚ â”œâ”€â”€ BookService.java
â”‚ â””â”€â”€ ImageService.java
â”‚
â”œâ”€â”€ Repository
â”œâ”€â”€ UserRepository.java
â”œâ”€â”€ BookRepository.java
â””â”€â”€ GeneratedImageRepository.java
```
---
## ğŸ“ í´ë” ë³„ ì •ì˜

### ğŸ§± Entity
DB í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ë„ë©”ì¸ ê°ì²´ë¥¼ ì •ì˜í•˜ëŠ” í´ë”ì…ë‹ˆë‹¤.  
JPA ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì»¬ëŸ¼ êµ¬ì¡°ì™€ ì—”í‹°í‹° ê°„ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•˜ë©°,  
í”„ë¡œì íŠ¸ì˜ ë°ì´í„° êµ¬ì¡°ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.  

### ğŸ§© Repository
ë°ì´í„°ë² ì´ìŠ¤ì™€ ì§ì ‘ í†µì‹ í•˜ëŠ” í´ë”ë¡œ,  
JpaRepositoryë¥¼ ìƒì†í•´ ê¸°ë³¸ CRUD ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.  
Service ë ˆì´ì–´ê°€ DBì— **ì§ì ‘** ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ ì¶”ìƒí™”í•œ ê³„ì¸µì…ë‹ˆë‹¤.

### âš™ï¸ Service
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì£¼ìš” ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” í•µì‹¬ í´ë”ì…ë‹ˆë‹¤.  
ìš”ì²­ ë°ì´í„° ê²€ì¦, ì˜ˆì™¸ ì²˜ë¦¬, ê¶Œí•œ í™•ì¸ ë“±ì˜ ë¡œì§ì„ ìˆ˜í–‰í•˜ë©°  
Repositoryì™€ Controllerë¥¼ ì—°ê²°í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

### ğŸŒ Controller
í´ë¼ì´ì–¸íŠ¸ì˜ HTTP ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì €ì¥í•œ í´ë”ì…ë‹ˆë‹¤.  
ìš”ì²­ì„ Service ë ˆì´ì–´ë¡œ ì „ë‹¬í•˜ê³ , ì²˜ë¦¬ ê²°ê³¼ë¥¼ JSON í˜•íƒœë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.  

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ í´ë¡ 

```bash
git clone https://github.com/your-repo/miniproject04.git
```

### 2ï¸âƒ£ ê²½ë¡œì´ë™
```cd miniproject04```

### 3ï¸âƒ£ ì‹¤í–‰ ëª…ë ¹ì–´

### ğŸ macOS / ğŸ§ Linux
```./gradlew bootRun```

### ğŸ–¥ï¸ Windows PowerShell
```.\gradlew bootRun```

### 4ï¸âƒ£H2 ì½˜ì†” ì ‘ì†
```
http://localhost:8080/h2-console

JDBC URL: jdbc:h2:~/demodb
ID : sa
PW :1234
```

# ğŸ“„ API ëª…ì„¸ì„œ (API Specification)
## **ğŸ§‘â€ğŸ’» User API**

**1. ë¡œê·¸ì¸ (Login)**
   
| êµ¬ë¶„   | API ì´ë¦„ | Method | REST API            | ìš”ì²­ ë°ì´í„°                                                        | ì„±ê³µ ì‘ë‹µ                    | ì˜¤ë¥˜ ì‘ë‹µ                                          |
| ---- | ------ | ------ | ------------------- | ------------------------------------------------------------- | ------------------------ | ---------------------------------------------- |
| User | ë¡œê·¸ì¸    | POST   | /api/v1/users/login | {"user_id": null, "login_id": "string", "password": "string"} | code: 200 {"user_id": 1} | code: 401 {"message": "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤."} |

**2. íšŒì›ê°€ì… (Signup)**
   
| êµ¬ë¶„   | API ì´ë¦„ | Method | REST API             | ìš”ì²­ ë°ì´í„°                                                        | ì„±ê³µ ì‘ë‹µ                    | ì˜¤ë¥˜ ì‘ë‹µ                                                                              
| ---- | ------ | ------ | -------------------- | ------------------------------------------------------------- | ------------------------ | ------------------------------------------------------------------------------------------- |
| User | íšŒì›ê°€ì…   | POST   | /api/v1/users/signup | {"user_id": null, "login_id": "string", "password": "string"} | code: 200 {"user_id": 1} | code: 404 {"message": "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”"}<br>code: 404 {"message": "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤."} |


## **ğŸ“˜ Book API**

**3. ì±… ìƒì„± (Create Book)**

| êµ¬ë¶„   | API ì´ë¦„ | Method | REST API      | ìš”ì²­ ë°ì´í„°                                                                      | ì„±ê³µ ì‘ë‹µ                    | ì˜¤ë¥˜ ì‘ë‹µ                                    |
| ---- | ------ | ------ | ------------- | --------------------------------------------------------------------------- | ------------------------ | ---------------------------------------- |
| Book | ì±… ìƒì„±   | POST   | /api/v1/books | {"book_id": null, "title": "string", "description": "string", "user_id": 1} | code: 200 {"book_id": 1} | code: 404 {"message": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤."} |


**4. ì±… ì¡°íšŒ (Book Check)**
   
| êµ¬ë¶„   | API ì´ë¦„ | Method | REST API            | ìš”ì²­ ë°ì´í„°                       | ì„±ê³µ ì‘ë‹µ                                                                                                                                            | ì˜¤ë¥˜ ì‘ë‹µ                                |
| ---- | ------ | ------ | ------------------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------ |
| Book | ì±… ì¡°íšŒ   | POST   | /api/v1/books/check | {"book_id": 1, "user_id": 1} | code:  200 {"power": "ì‘ì„±ì", "title": "string", "description": "string"}<br>code: 200 {"power": "ì´ìš©ì", "title": "string", "description": "string"} | code: 404 {"message": "ì‚­ì œëœ ëª©ë¡ ì…ë‹ˆë‹¤."} |


**5. ì±… ëª©ë¡ ì¡°íšŒ (List Books)**
   
| êµ¬ë¶„   | API ì´ë¦„  | Method | REST API           | ìš”ì²­ ë°ì´í„° | ì„±ê³µ ì‘ë‹µ                                                                                                                                                                                      | ì˜¤ë¥˜ ì‘ë‹µ |
| ---- | ------- | ------ | ------------------ | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----- |
| Book | ì±… ëª©ë¡ ì¡°íšŒ | GET    | /api/v1/books/list | -      | code: 200 {"data": [{"book_id": 2, "title": "string", "description": "string", "image_url": "string"}, {"book_id": 1, "title": "string", "description": "string", "image_url": "string"}]} | -     |


**6. ì±… ìˆ˜ì • (Update Book)**
   
| êµ¬ë¶„   | API ì´ë¦„ | Method | REST API          | ìš”ì²­ ë°ì´í„°                                                                   | ì„±ê³µ ì‘ë‹µ     | ì˜¤ë¥˜ ì‘ë‹µ                                                               |
| ---- | ------ | ------ | ----------------- | ------------------------------------------------------------------------ | --------- | ------------------------------------------------------------------- |
| Book | ì±… ìˆ˜ì •   | PUT    | /api/v1/books/put | {"book_id": 1, "title": "string", "description": "string", "user_id": 1} | code:  200 | code: 404 {"message": "ë“±ë¡ëœ ì±… ì—†ìŒ"}<br>code: 403 {"message": "ê¶Œí•œ ì—†ìŒ"} |


**7. ì±… ì‚­ì œ (Delete Book)**
   
| êµ¬ë¶„   | API ì´ë¦„ | Method | REST API             | ìš”ì²­ ë°ì´í„°                       | ì„±ê³µ ì‘ë‹µ     | ì˜¤ë¥˜ ì‘ë‹µ                                                               |
| ---- | ------ | ------ | -------------------- | ---------------------------- | --------- | ------------------------------------------------------------------- |
| Book | ì±… ì‚­ì œ   | DELETE | /api/v1/books/delete | {"user_id": 1, "book_id": 1} | code: 200 | code: 404 {"message": "ë“±ë¡ëœ ì±… ì—†ìŒ"}<br>code: 403 {"message": "ê¶Œí•œ ì—†ìŒ"} |


## **ğŸ–¼ï¸ Image API**

**8. ì±… í‘œì§€ ì¡°íšŒ (Check Image)**

| êµ¬ë¶„    | API ì´ë¦„  | Method | REST API            | ìš”ì²­ ë°ì´í„°         | ì„±ê³µ ì‘ë‹µ                                                                                                  | ì˜¤ë¥˜ ì‘ë‹µ                             |
| ----- | ------- | ------ | ------------------- | -------------- | ------------------------------------------------------------------------------------------------------ | --------------------------------- |
| Image | ì±… í‘œì§€ ì¡°íšŒ | POST   | /api/v1/image/check | {"book_id": 1} | code: 200 {"power": "ì‘ì„±ì", "image_url": "string"}<br>code: 200 {"power": "ì´ìš©ì", "image_url": "string"} | code: 404 {"message": "ë“±ë¡ëœ ì±… ì—†ìŒ"} |


**9. ì±… í‘œì§€ ìˆ˜ì • (Update Image)**
    
| êµ¬ë¶„    | API ì´ë¦„  | Method | REST API          | ìš”ì²­ ë°ì´í„°                                | ì„±ê³µ ì‘ë‹µ        | ì˜¤ë¥˜ ì‘ë‹µ                             |
| ----- | ------- | ------ | ----------------- | ------------------------------------- | --------- | --------------------------------- |
| Image | ì±… í‘œì§€ ìˆ˜ì • | PUT    | /api/v1/image/put | {"image_url": "string", "book_id": 1} | code: 200 | code: 404 {"message": "ë“±ë¡ëœ ì±… ì—†ìŒ"} |


**10. ì±… í‘œì§€ ë“±ë¡ (Create Image)**
    
| êµ¬ë¶„    | API ì´ë¦„  | Method | REST API      | ìš”ì²­ ë°ì´í„°                                                | ì„±ê³µ ì‘ë‹µ        | ì˜¤ë¥˜ ì‘ë‹µ                             |
| ----- | ------- | ------ | ------------- | ----------------------------------------------------- | --------- | --------------------------------- |
| Image | ì±… í‘œì§€ ë“±ë¡ | POST   | /api/v1/image | {"img_id": null, "image_url": "string", "book_id": 1} | code: 200 | code: 404 {"message": "ë“±ë¡ëœ ì±… ì—†ìŒ"} |
